<div class="container-fluid auth-layout">
  <div class="row auth">
    <div class="text-center mt-5 mb-5">
      <img
        ngSrc="./assets/svg/omuniLogoDark.svg"
        alt="logo"
        width="200"
        height="50"
        fetchpriority="high"
        class=""
      />
    </div>

    <div class="col-11 col-md-8 col-lg-5 auth-card px-2rem">
      <div class="panel-body" *ngIf="showSocialMediaTabs">
        <h3
          class="text-center SFProDisplay-Semibold text-left text-blackdark fs-20px mt-2 mt-md-3 mb-4 font-weight-bold"
        >
          Login To Shiprocket Using
        </h3>
      </div>

      <div class="socialMediaTabs" *ngIf="showSocialMediaTabs">
        <div class="row d-none d-md-flex mt-15 justify-content-center">
          <div
            tabindex="-1"
            class="col-md-4 col-xs-6 pr-sm col-6"
            (click)="signInWithGoogle()"
            (keyup.enter)="signInWithGoogle()"
          >
            <a class="btn btn-block btn-social btn-border" href="javascript:;">
              <img
                class="w-20px mr-2"
                ngSrc="./assets/images/google.png"
                alt="google"
                width="20"
                height="20"
              />
              Google
            </a>
          </div>

          <div
            tabindex="-1"
            class="col-md-4 col-xs-6 pr-sm col-6"
            *ngIf="showEmailLoginForm"
            (click)="onClickLoginViaPhoneNumber()"
            (keyup.enter)="onClickLoginViaPhoneNumber()"
          >
            <a class="btn btn-block btn-social btn-border" href="javascript:;">
              <img
                ngSrc="./assets/images/phone_no.png"
                alt="phone"
                width="20"
                height="20"
                class="w-20px mr-2"
              />
              Phone No
            </a>
          </div>

          <div
            tabindex="-1"
            class="col-md-4 col-xs-6 pr-sm col-6"
            *ngIf="showPhoneLoginForm"
            (click)="onClickEmailId()"
            (keyup.enter)="onClickEmailId()"
          >
            <a class="btn btn-block btn-social btn-border" href="javascript:;">
              <img
                ngSrc="./assets/images/email.png"
                alt="phone"
                width="20"
                height="20"
                class="w-20px mr-2"
              />
              Email
            </a>
          </div>
        </div>
        <!-- .. OR -->
        <div class="text-center ptb-tenpx">
          <p class="my-1 text-center fs-16px">
            <span class="dashed-border mb-2px"> </span> or
            <span class="dashed-border mb-2px"></span>
          </p>
        </div>
      </div>
      <!-- On Small Screen social tags -->
      <div
        class="row d-flex d-md-none mt-15 justify-content-center"
        *ngIf="showSocialMediaTabs"
      >
        <div
          class="col col-3 mb-2 text-center text-opacity-90 SFProDisplay-Regular"
        >
          <button
            class="btn mb-1 btn-light rounded-5rem border bg-white fs-14px p-0-75"
            (click)="signInWithGoogle()"
          >
            <img
              class="w-20px"
              ngSrc="./assets/images/google.png"
              alt="google"
              width="20"
              height="20"
            />
          </button>
          <br />
          Google
        </div>

        <div
          *ngIf="showEmailLoginForm"
          class="text-center col col-3 mb-2 text-opacity-90 SFProDisplay-Regular"
        >
          <button
            class="btn mb-1 p-0-75 btn-light rounded-5rem border bg-white fs-14px"
            (click)="onClickLoginViaPhoneNumber()"
          >
            <img
              class="w-20px"
              ngSrc="./assets/images/phone_no.png"
              alt="facebook"
              width="20"
              height="20"
            />
          </button>
          <br />
          Phone No
        </div>
        <div
          *ngIf="showPhoneLoginForm"
          class="text-center col col-3 mb-2 text-opacity-90 SFProDisplay-Regular"
        >
          <button
            class="btn mb-1 p-0-75 btn-light rounded-5rem border bg-white fs-14px"
            (click)="onClickEmailId()"
          >
            <img
              class="w-20px"
              ngSrc="./assets/images/email.png"
              alt="email"
              width="20"
              height="20"
            />
          </button>
          <br />
          Email
        </div>
      </div>
      <!-- Form For Email ID -->
      <form
        tabindex="-1"
        [formGroup]="userForm"
        (submit)="onSubmit()"
        *ngIf="showEmailLoginForm"
        (keyup.enter)="onSubmit()"
        class="auth-form mb-lg"
      >
        <div class="mb-3">
          <label for="email" class="form-label">Email ID</label>
          <input
            type="email"
            class="form-control"
            formControlName="email"
            autocomplete="Password"
            id="email"
            placeholder="Enter your email ID"
            [pattern]="emailPattern"
          />
          <div class="row">
            <div
              *ngFor="let validation of loginValidationMessage.email"
              class="text-danger col-12"
            >
              <span
                *ngIf="
                  ctrlByName('email').hasError(validation.type) &&
                  ctrlByName('email').dirty
                "
              >
                {{ validation.message }}
              </span>
            </div>
          </div>
        </div>

        <div class="mb-3 eye position-relative">
          <label for="password" class="form-label">Password</label>
          <input
            #pass
            [type]="'password'"
            formControlName="password"
            autocomplete="new-password"
            class="form-control"
            id="password"
            placeholder="Enter Password"
          />
          <span
            tabindex="0"
            class="position-absolute pointer resposive-position"
            (click)="toggle(pass)"
            (keyup.enter)="toggle(pass)"
          >
            <img
              *ngIf="pass.type === 'text'"
              ngSrc="./assets/images/eyeopen.png"
              alt="Show password image "
              class="w-20px"
              width="20"
              height="20"
            />
            <img
              *ngIf="pass.type !== 'text'"
              ngSrc="./assets/images/eyeclose.png"
              alt="Show password image "
              class="w-20px"
              width="20"
              height="20"
            />
          </span>
          <div class="row">
            <div
              *ngFor="let validation of loginValidationMessage.password"
              class="text-danger col-12"
            >
              <span
                *ngIf="
                  ctrlByName('password').hasError(validation.type) &&
                  ctrlByName('password').dirty
                "
              >
                {{ validation.message }}
              </span>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <a routerLink="/forgotpassword" class="a-link link-primary fs-12"
            >Forgot password ?</a
          >
        </div>

        <div class="d-grid gap-2">
          <button class="btn btn-solid" type="submit">Login</button>
        </div>

        <div class="auth-note mt-3">
          New to Shiprocket?
          <a routerLink="/signup" class="a-link link-primary fs-12 pointer ml-2"
            >Sign Up Now</a
          >
        </div>
      </form>
      <!-- Form For Mobile -->
      <form
        tabindex="-1"
        [formGroup]="phoneLoginForm"
        *ngIf="showPhoneLoginForm"
        (submit)="generateOTP()"
        autocomplete="off"
        class="auth-form mb-lg"
      >
        <div class="mb-3">
          <label for="mobile" class="form-label">Enter Mobile Number</label>
          <input
            type="text"
            class="form-control"
            formControlName="mobile"
            [pattern]="mobilePattern"
            autocomplete="new-password"
            id="mobile"
            placeholder="Enter Phone Number"
            onlyNumbers
            maxlength="10"
          />
          <div class="row mt-1">
            <div
              *ngFor="let validation of mobileValidationMessage.mobile"
              class="text-danger col-12"
            >
              <span
                *ngIf="
                  ctrlByNameForMobile('mobile').hasError(validation.type) &&
                  (ctrlByNameForMobile('mobile').dirty || submitted)
                "
              >
                {{ validation.message }}
              </span>
            </div>
          </div>
        </div>

        <div class="d-grid gap-2">
          <button
            class="btn btn-solid"
            type="submit"
            [disabled]="ctrlByNameForMobile('mobile').errors"
          >
            Login with OTP
          </button>
        </div>

        <div class="auth-note mt-3">
          New to Shiprocket?
          <a routerLink="/signup" class="a-link link-primary fs-12 pointer ml-2"
            >Sign Up Now</a
          >
        </div>
      </form>
      <!-- OTP Screen  -->
      <form
        tabindex="-1"
        [formGroup]="loginOTPForm"
        *ngIf="showOtpForm"
        (submit)="onOTPFormSubmit()"
        class="auth-form mb-lg"
      >
        <div class="whiteBg" *ngIf="showOtpForm">
          <div class="mx-auto mb-0 col-12">
            <span class="fs-12px">
              <a
                class="text-blue"
                href="javascript:void(0);"
                (click)="backToLogin('phoneotp')"
              >
                <img
                  class="w-12px"
                  ngSrc="./assets/images/backbtn.png"
                  alt="backimg"
                  width="12"
                  height="12"
                />
                Back
              </a>
            </span>

            <h6
              class="mt-md-3 mt-3 text-blackdark SFProDisplay-Semibold fs-20px fw-500"
            >
              OTP Verification
            </h6>

            <p class="mt-md-4 mb-1 lbl_st mt-3 SFProDisplay-Medium fs-12px">
              Enter OTP sent to +91-<span>{{
                ctrlByNameForMobile('mobile').value
              }}</span>
            </p>
            <input type="hidden" formControlName="otp" />
            <app-otp-input
              class="digit-group"
              (isvalid)="getOtpState($event)"
              (values)="getOtpInputs($event)"
            >
            </app-otp-input>

            <div class="mt-2 d-flex justify-content-between">
              <p
                *ngIf="!timerflag"
                class="SFProDisplay-Regular fs-12px mb-3"
                style="color: rgba(0, 0, 0, 0.6)"
              >
                Didn't Received OTP?
                <a href="#" class="text-blue" (click)="generateOTP()">Resend</a>
              </p>
              <p
                *ngIf="timerflag"
                class="ml-auto fs-12px SFProDisplay-Regular mb-3"
              >
                <img
                  ngSrc="./assets/images/timer.png"
                  height="10"
                  width="10"
                  alt="Timer Logo"
                />
                00 :
                {{ countdown < 10 ? '0' + countdown : countdown.toString() }}
              </p>
            </div>

            <div
              *ngIf="invalidOtpError"
              class="alert alert-danger SFProDisplay-Regular"
            >
              {{ errorOtpMessage }}
            </div>

            <div class="d-grid gap-2 col-12 my-3">
              <button
                class="btn btn-solid h-40px"
                type="submit"
                [disabled]="
                  !ctrlByNameForOTP('otp').value ||
                  !ctrlByNameForOTP('otp').valid
                "
              >
                Login with OTP
              </button>
            </div>
          </div>
        </div>
      </form>
      <!-- Common From Error  -->
      <div class="row">
        <div
          *ngIf="formResponseErrorObj && formResponseErrorObj.message"
          class="text-danger text-center pt-2 col-12"
        >
          {{ formResponseErrorObj.message }}
        </div>
      </div>
    </div>

    <div class="text-center mt-3 footer">
      <app-footer></app-footer>
    </div>
  </div>
</div>
